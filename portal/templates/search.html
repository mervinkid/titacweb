{% extends 'base/base.html' %}
{% load staticfiles %}

{% block title %}搜索结果{% endblock %}

{% block position %}
    <ul>
        <li><a href="/">首页</a></li>
        <li><div class="position_split"></div></li>
        <li><label>搜索结果</label></li>
    </ul>
{% endblock %}

{% block content %}
 <div class="container clearfix">
    <!--left-->
    <div class="left-block">
        <div class="white-box space">
        {% if search_result == None %}
        {% else %}
        <label>关键词&nbsp;"{{ query }}"&nbsp;的搜索结果</label>
        <hr>
        {% endif %}
        <p></p><p></p>
        {% if search_result == None %}
        <div style="text-align: center; padding: 50px;">
            {% if message == 0 %}
            <p>您搜索的频率过快超过了网站系统限制，请稍后再试。</p>
            {% elif message == 1 %}
            <p>您搜索的关键字不合法，请使用其他关键词进行搜索。</p>
            {% else %}
            <p>没有查询到任何结果，请使用其他关键词进行搜索。</p>
            {% endif %}
        </div>
        {% else %}
            {% for result_item in search_result %}
                <div style="margin-left: 10px;margin-right: 10px;">
                    <div style="position:absolute;width: 40px;">
                        <img src="{% static 'portal/img/search-item.png' %}" style="margin-top: 5px;">
                    </div>
                    <div style="margin-left:40px;">
                            {% if result_item.type == 'solution' %}
                            <a href="/solution/{{ result_item.id }}">
                            {% elif result_item.type == 'product' %}
                            <a href="/product/{{ result_item.id }}">
                            {% endif %}
                                <h4 style="margin-bottom: 5px;">{{ result_item.title }}</h4>
                                {{ result_item.sketch }}
                            </a>
                    </div>
                </div>
                <div style="height: 15px;"></div>
            {% endfor %}
        {% endif %}
        </div>
    </div><!--end left-->
    <!--right-->
    <div class="right-block">
        <div class="white-box">
            <label>您的搜索历史</label>
            <hr/>
            <p></p>
            {% if not history_list %}
            <p><label>还未进行过有效搜索</label></p>
            {% endif %}
            {% for history_item in history_list %}
            <p>
                <a href="/search/?s={{ history_item }}">
                    <img src="{% static 'portal/img/search.png' %}" style="width: 12px;height: 12px;">
                    {{ history_item }}
                </a>
            </p>
            {% endfor %}
        </div>
    </div><!--end right-->
</div>
{% endblock %}